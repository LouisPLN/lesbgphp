{% extends 'base.html.twig' %}

{% block title %}Adoptoutou | Produits üê∂{% endblock %}

{% block body %}

<div id="panier">
{% for product in products %}
<div id="card_product">
<h5>Nom :<a id='name-{{product.id}}'>{{ product.name }} </a></h5>
<p> id : {{ product.id }} </p>
<p> Description : {{ product.description }} </p>
<p>Prix :<a id='price-{{product.id}}'>{{ product.price }} </a>‚Ç¨</p>
<p> Type de produit : {{ product.type }} </p>
<p> Stock : {{ product.stock }} </p>
<p><img class="pet-img" src="{{ product.urlImg }}" alt="Image Pet" style="width:250px ; height:150px;"></p>

Quantit√©:<a name="btn_adopt"> 
    <input type="number" id='qtt-{{product.id}}'>
    <button id='btn-{{product.id}}' >Ajout Panier !</button>
</a>
</div>
<hr>
{% endfor %}
</div>
<div id="cart">
<h3> Votre Panier :</h3>
</div>


<button id='buy' >Paiement !</button>

<div id="paie">
<h3> Total Paiement :</h3>
</div>

{% block javascripts %}

<script>

var buttons = document.querySelectorAll("#panier button");
var priceArray = new Array();

buttons.forEach((button,i) => {
  i++;
  button.addEventListener('click', () => {
    var nom = document.querySelector("#name-"+ i).innerHTML;
    var qtt = document.getElementById("qtt-"+ i).value;
    var prix = document.querySelector("#price-"+ i).innerHTML;
    var cart = document.getElementById("cart");

    const para = document.createElement("p");
    para.setAttribute('id','p'+ i);
    const node = document.createTextNode("Product :" + nom + " Quantit√© :" + qtt +" Prix :" + prix );

    priceArray.push(qtt*prix)

    if(document.getElementById("qtt-"+ i).value){
        para.appendChild(node);
        cart.appendChild(para);
        document.getElementById("qtt-"+ i).value = ''
    }

   

  });
});


var paiement = document.getElementById("buy");
var paie = document.getElementById("paie");

paiement.addEventListener('click' , () => {
    var total = 0;

    const para = document.createElement("p");  
    para.setAttribute('id','total');

    for (var i = 0; i < priceArray.length ; i++) {
         total += priceArray[i];
         console.log(total);
    }
    
    const node = document.createTextNode("Prix total : " + total + "‚Ç¨");
    console.log(total);

    para.appendChild(node);
    paie.appendChild(para);
    
})



</script>
{% endblock %}


{% endblock %}
